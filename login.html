<!-- login.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AL ZOZ â€” Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>body{background:#f4f6fb} .card{max-width:420px;margin:60px auto;padding:24px;border-radius:12px;box-shadow:0 12px 40px rgba(8,18,40,0.06)} .google-icon{width:18px;height:18px;margin-right:10px}</style>
</head>
<body>
  <div class="card">
    <div class="text-center mb-3"><img src="logo.png" style="height:48px" alt="AL ZOZ"><h4 class="mt-2">Sign in to AL ZOZ</h4></div>

    <div id="msg" class="text-center text-danger mb-2"></div>
    <input id="email" class="form-control mb-2" placeholder="Email" type="email" autocomplete="email">
    <input id="password" class="form-control mb-2" placeholder="Password" type="password" autocomplete="current-password">

    <div class="d-grid gap-2">
      <button id="loginBtn" class="btn btn-primary">Login</button>
      <button id="registerBtn" class="btn btn-outline-secondary">Create account</button>
    </div>

    <div class="text-center my-3 text-muted">or</div>

    <div class="d-grid">
      <button id="googleBtn" class="btn btn-light border">
        <img class="google-icon" src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 533.5 544.3'><path fill='%234285F4' d='M533.5 278.4c0-17.6-1.6-34.6-4.7-51.1H272v96.6h147.1c-6.4 34.9-25.6 64.5-54.5 84.3v69h88C497.5 420.1 533.5 353.2 533.5 278.4z'/><path fill='%2334A853' d='M272 544.3c73.7 0 135.6-24.3 180.8-66.1l-88-69c-24.5 16.5-56 26.1-92.8 26.1-71 0-131.3-47.9-152.9-112.2h-90.6v70.5C76.1 486.6 167.6 544.3 272 544.3z'/><path fill='%23FBBC05' d='M119.1 322.0c-10.9-32.9-10.9-68.2 0-101.1V150.4h-90.6C6.9 195.3 0 233.9 0 272c0 38.1 6.9 76.6 28.5 121.6l90.6-72.6z'/><path fill='%23EA4335' d='M272 108.7c38.9 0 73.9 13.4 101.4 39.6l75.9-75.9C408.6 23.9 346.7 0 272 0 167.6 0 76.1 57.7 28.5 150.4l90.6 70.5C140.7 156.6 201 108.7 272 108.7z'/></svg>">
        Login with Google
      </button>
    </div>

    <div class="text-center small text-muted mt-3">If you create an account with <strong>alihomekh@gmail.com</strong> you will be admin.</div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBMcvOHM65rOqpZbwqSGI7LJm6lNc0dPo4",
      authDomain: "al-zoz-store.firebaseapp.com",
      projectId: "al-zoz-store",
      storageBucket: "al-zoz-store.firebasestorage.app",
      messagingSenderId: "977135794801",
      appId: "1:977135794801:web:43aae20e57879b8e9579d0",
      measurementId: "G-FG212CG4VE"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    const emailEl = document.getElementById('email'), passEl = document.getElementById('password'), msg = document.getElementById('msg');
    document.getElementById('registerBtn').addEventListener('click', async ()=>{
      msg.textContent=''; const email=emailEl.value.trim(), p=passEl.value;
      if(!email||!p){ msg.textContent='Enter email and password'; return; }
      try{ await auth.createUserWithEmailAndPassword(email,p); }catch(e){ msg.textContent=e.message; }
    });
    document.getElementById('loginBtn').addEventListener('click', async ()=>{
      msg.textContent=''; const email=emailEl.value.trim(), p=passEl.value;
      if(!email||!p){ msg.textContent='Enter email and password'; return; }
      try{ await auth.signInWithEmailAndPassword(email,p); }catch(e){ msg.textContent=e.message; }
    });
    document.getElementById('googleBtn').addEventListener('click', async ()=>{
      try{ const provider = new firebase.auth.GoogleAuthProvider(); await auth.signInWithPopup(provider); }catch(e){ msg.textContent=e.message; }
    });

    auth.onAuthStateChanged(user=>{
      if(user){
        const mail = (user.email||'').toLowerCase();
        if(mail === 'alihomekh@gmail.com') location.href='admin.html'; else location.href='index.html';
      }
    });
  </script>
</body>
</html>
